{"/workspaces/backend/src/index.ts":{"path":"/workspaces/backend/src/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":51}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":75}},"6":{"start":{"line":9,"column":26},"end":{"line":9,"column":63}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":32}},"8":{"start":{"line":11,"column":12},"end":{"line":11,"column":36}},"9":{"start":{"line":12,"column":13},"end":{"line":12,"column":28}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":34}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":16}},"12":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"13":{"start":{"line":17,"column":0},"end":{"line":17,"column":51}},"14":{"start":{"line":18,"column":0},"end":{"line":20,"column":3}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":41}},"16":{"start":{"line":21,"column":0},"end":{"line":36,"column":3}},"17":{"start":{"line":22,"column":4},"end":{"line":35,"column":5}},"18":{"start":{"line":23,"column":31},"end":{"line":23,"column":56}},"19":{"start":{"line":24,"column":46},"end":{"line":24,"column":56}},"20":{"start":{"line":25,"column":33},"end":{"line":25,"column":106}},"21":{"start":{"line":26,"column":45},"end":{"line":26,"column":55}},"22":{"start":{"line":27,"column":35},"end":{"line":27,"column":105}},"23":{"start":{"line":28,"column":32},"end":{"line":28,"column":42}},"24":{"start":{"line":29,"column":8},"end":{"line":29,"column":49}},"25":{"start":{"line":30,"column":8},"end":{"line":30,"column":146}},"26":{"start":{"line":31,"column":8},"end":{"line":31,"column":127}},"27":{"start":{"line":34,"column":8},"end":{"line":34,"column":20}},"28":{"start":{"line":37,"column":0},"end":{"line":57,"column":3}},"29":{"start":{"line":38,"column":4},"end":{"line":56,"column":5}},"30":{"start":{"line":39,"column":30},"end":{"line":39,"column":54}},"31":{"start":{"line":40,"column":46},"end":{"line":40,"column":56}},"32":{"start":{"line":41,"column":32},"end":{"line":41,"column":94}},"33":{"start":{"line":42,"column":45},"end":{"line":42,"column":55}},"34":{"start":{"line":43,"column":8},"end":{"line":49,"column":9}},"35":{"start":{"line":44,"column":39},"end":{"line":44,"column":110}},"36":{"start":{"line":45,"column":12},"end":{"line":45,"column":53}},"37":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"38":{"start":{"line":50,"column":32},"end":{"line":50,"column":42}},"39":{"start":{"line":51,"column":8},"end":{"line":51,"column":146}},"40":{"start":{"line":52,"column":8},"end":{"line":52,"column":127}},"41":{"start":{"line":55,"column":8},"end":{"line":55,"column":20}},"42":{"start":{"line":58,"column":0},"end":{"line":75,"column":3}},"43":{"start":{"line":59,"column":4},"end":{"line":74,"column":5}},"44":{"start":{"line":60,"column":32},"end":{"line":60,"column":66}},"45":{"start":{"line":61,"column":8},"end":{"line":70,"column":9}},"46":{"start":{"line":62,"column":36},"end":{"line":62,"column":46}},"47":{"start":{"line":63,"column":39},"end":{"line":63,"column":110}},"48":{"start":{"line":64,"column":37},"end":{"line":64,"column":47}},"49":{"start":{"line":65,"column":12},"end":{"line":65,"column":53}},"50":{"start":{"line":66,"column":12},"end":{"line":66,"column":119}},"51":{"start":{"line":69,"column":12},"end":{"line":69,"column":49}},"52":{"start":{"line":73,"column":8},"end":{"line":73,"column":20}},"53":{"start":{"line":76,"column":0},"end":{"line":76,"column":43}},"54":{"start":{"line":77,"column":0},"end":{"line":85,"column":3}},"55":{"start":{"line":79,"column":4},"end":{"line":79,"column":57}},"56":{"start":{"line":82,"column":4},"end":{"line":84,"column":5}},"57":{"start":{"line":83,"column":8},"end":{"line":83,"column":34}},"58":{"start":{"line":86,"column":0},"end":{"line":86,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":13},"end":{"line":18,"column":14}},"loc":{"start":{"line":18,"column":25},"end":{"line":20,"column":1}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":79},"end":{"line":21,"column":80}},"loc":{"start":{"line":21,"column":105},"end":{"line":36,"column":1}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":91},"end":{"line":37,"column":92}},"loc":{"start":{"line":37,"column":117},"end":{"line":57,"column":1}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":58,"column":84},"end":{"line":58,"column":85}},"loc":{"start":{"line":58,"column":110},"end":{"line":75,"column":1}},"line":58},"5":{"name":"(anonymous_5)","decl":{"start":{"line":78,"column":18},"end":{"line":78,"column":19}},"loc":{"start":{"line":78,"column":24},"end":{"line":80,"column":1}},"line":78},"6":{"name":"(anonymous_6)","decl":{"start":{"line":81,"column":17},"end":{"line":81,"column":18}},"loc":{"start":{"line":81,"column":26},"end":{"line":85,"column":1}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":43,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":49,"column":9}},{"start":{"line":43,"column":8},"end":{"line":49,"column":9}}],"line":43},"4":{"loc":{"start":{"line":61,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":70,"column":9}},{"start":{"line":61,"column":8},"end":{"line":70,"column":9}}],"line":61},"5":{"loc":{"start":{"line":82,"column":4},"end":{"line":84,"column":5}},"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":84,"column":5}},{"start":{"line":82,"column":4},"end":{"line":84,"column":5}}],"line":82}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":3,"18":3,"19":3,"20":3,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":2,"28":1,"29":3,"30":3,"31":3,"32":3,"33":1,"34":1,"35":1,"36":1,"37":0,"38":1,"39":1,"40":1,"41":2,"42":1,"43":3,"44":3,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":0,"52":2,"53":1,"54":1,"55":1,"56":0,"57":0,"58":1},"f":{"0":3,"1":1,"2":3,"3":3,"4":3,"5":1,"6":0},"b":{"0":[1,1,1],"1":[1,2],"2":[3,3],"3":[1,0],"4":[1,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/index.ts","sources":["/workspaces/backend/src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import express from \"express\";\nimport dotenv from \"dotenv\";\nimport BlockchairApiClientWrapper from \"./integrations/blockchair/\";\nimport { ImpactEstimator } from \"./services/estimate-impact\";\nimport { Parse, OffsettUrl, OffsettErrorHandler } from \"./util\";\n\nconst app: express.Express = express();\nconst cors = require(\"cors\");\n\napp.use(express.json());\napp.use(cors());\n\nconst port = 3001;\n\n// Configure .env\ndotenv.config({ path: \"./config/.env\" });\n\napp.get(\"/\", (_, res) => {\n  res.status(200).send(\"Hello World!\");\n});\n\napp.get(\n  OffsettUrl.relative.ESTIMATE_WALLET_IMPACT + \":bitcoinAddress\",\n  async (req: express.Request<{ bitcoinAddress: string }>, res: express.Response, next: express.NextFunction) => {\n    try {\n      const bitcoinAddress: string = req.params.bitcoinAddress;\n      const beforeLoadingTransactionDates = new Date();\n      const transactionDates: Date[] = await BlockchairApiClientWrapper.getAllTransactionDatesOfWallet(bitcoinAddress);\n      const afterLoadingTransactionDates = new Date();\n      const estimatedEmissions = await ImpactEstimator.getEstimates(transactionDates);\n      const afterEstimation = new Date();\n      res.status(200).json(estimatedEmissions);\n      console.log(\n        `loading transaction dates ${\n          (afterLoadingTransactionDates.getTime() - beforeLoadingTransactionDates.getTime()) / 1000\n        } sec`,\n      );\n      console.log(\n        `estimating emissions ${(afterEstimation.getTime() - afterLoadingTransactionDates.getTime()) / 1000} sec`,\n      );\n    } catch (error) {\n      next(error);\n    }\n  },\n);\n\napp.get(\n  OffsettUrl.relative.ESTIMATE_IMPACT_WITH_TRANSACTION_ID + \":transactionID\",\n  async (\n    req: express.Request<{ transactionID: string }>,\n    res: express.Response,\n    next: express.NextFunction,\n  ): Promise<void> => {\n    try {\n      const transactionID: string = req.params.transactionID;\n      const beforeLoadingTransactionDates = new Date();\n      const transactionDate: Date | undefined = await BlockchairApiClientWrapper.getDateOfTransaction(transactionID);\n      const afterLoadingTransactionDates = new Date();\n      if (transactionDate) {\n        const estimatedEmissions: ImpactEstimator = await ImpactEstimator.getEstimates([transactionDate]);\n        res.status(200).json(estimatedEmissions);\n      } else {\n        res.status(400).send();\n      }\n      const afterEstimation = new Date();\n      console.log(\n        `loading transaction dates ${\n          (afterLoadingTransactionDates.getTime() - beforeLoadingTransactionDates.getTime()) / 1000\n        } sec`,\n      );\n      console.log(\n        `estimating emissions ${(afterEstimation.getTime() - afterLoadingTransactionDates.getTime()) / 1000} sec`,\n      );\n    } catch (error) {\n      next(error);\n    }\n  },\n);\n\napp.get(\n  OffsettUrl.relative.ESTIMATE_IMPACT_WITH_TRANSACTION_DATE + \":date\",\n  async (req: express.Request<{ date: string }>, res: express.Response, next: express.NextFunction): Promise<void> => {\n    try {\n      const transactionDate: Date | undefined = Parse.date(req.params.date);\n      if (transactionDate) {\n        const afterEstimation = new Date();\n        const estimatedEmissions = await ImpactEstimator.getEstimates([transactionDate]);\n        const beforeEstimation = new Date();\n        res.status(200).json(estimatedEmissions);\n        console.log(`estimating emissions ${(afterEstimation.getTime() - beforeEstimation.getTime()) / 1000} sec`);\n      } else {\n        res.status(400).send(\"Invalid date\");\n      }\n    } catch (error) {\n      next(error);\n    }\n  },\n);\n\napp.use(OffsettErrorHandler.handle);\n\napp\n  .listen(port, () => {\n    return console.log(`server is listening on ${port}`);\n  })\n  .on(\"error\", (err) => {\n    if (err) {\n      return console.error(err);\n    }\n  });\n\nexport default app;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"61e341fcbd4b3daf6785ed3fced2ab57f4bbe0b5"},"/workspaces/backend/src/integrations/blockchair/index.ts":{"path":"/workspaces/backend/src/integrations/blockchair/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":16},"end":{"line":6,"column":49}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":36}},"5":{"start":{"line":14,"column":8},"end":{"line":25,"column":9}},"6":{"start":{"line":15,"column":12},"end":{"line":15,"column":126}},"7":{"start":{"line":16,"column":12},"end":{"line":16,"column":107}},"8":{"start":{"line":17,"column":40},"end":{"line":17,"column":97}},"9":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"10":{"start":{"line":19,"column":16},"end":{"line":19,"column":199}},"11":{"start":{"line":21,"column":12},"end":{"line":21,"column":39}},"12":{"start":{"line":24,"column":12},"end":{"line":24,"column":181}},"13":{"start":{"line":30,"column":8},"end":{"line":42,"column":9}},"14":{"start":{"line":31,"column":12},"end":{"line":31,"column":79}},"15":{"start":{"line":32,"column":36},"end":{"line":32,"column":133}},"16":{"start":{"line":33,"column":12},"end":{"line":38,"column":13}},"17":{"start":{"line":34,"column":16},"end":{"line":34,"column":49}},"18":{"start":{"line":37,"column":16},"end":{"line":37,"column":33}},"19":{"start":{"line":41,"column":12},"end":{"line":41,"column":185}},"20":{"start":{"line":46,"column":34},"end":{"line":46,"column":36}},"21":{"start":{"line":47,"column":8},"end":{"line":47,"column":72}},"22":{"start":{"line":48,"column":8},"end":{"line":50,"column":11}},"23":{"start":{"line":49,"column":12},"end":{"line":49,"column":61}},"24":{"start":{"line":51,"column":8},"end":{"line":51,"column":33}},"25":{"start":{"line":57,"column":8},"end":{"line":57,"column":75}},"26":{"start":{"line":58,"column":28},"end":{"line":58,"column":62}},"27":{"start":{"line":59,"column":8},"end":{"line":66,"column":9}},"28":{"start":{"line":60,"column":12},"end":{"line":60,"column":69}},"29":{"start":{"line":61,"column":12},"end":{"line":63,"column":15}},"30":{"start":{"line":62,"column":16},"end":{"line":62,"column":46}},"31":{"start":{"line":64,"column":31},"end":{"line":64,"column":66}},"32":{"start":{"line":65,"column":12},"end":{"line":65,"column":96}},"33":{"start":{"line":67,"column":8},"end":{"line":67,"column":158}},"34":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"35":{"start":{"line":71,"column":12},"end":{"line":71,"column":22}},"36":{"start":{"line":73,"column":25},"end":{"line":73,"column":27}},"37":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"38":{"start":{"line":74,"column":21},"end":{"line":74,"column":22}},"39":{"start":{"line":75,"column":12},"end":{"line":75,"column":85}},"40":{"start":{"line":77,"column":33},"end":{"line":77,"column":60}},"41":{"start":{"line":78,"column":8},"end":{"line":86,"column":20}},"42":{"start":{"line":81,"column":12},"end":{"line":83,"column":15}},"43":{"start":{"line":82,"column":16},"end":{"line":82,"column":46}},"44":{"start":{"line":85,"column":42},"end":{"line":85,"column":72}},"45":{"start":{"line":89,"column":0},"end":{"line":89,"column":45}},"46":{"start":{"line":92,"column":8},"end":{"line":106,"column":9}},"47":{"start":{"line":93,"column":12},"end":{"line":102,"column":15}},"48":{"start":{"line":105,"column":12},"end":{"line":105,"column":42}},"49":{"start":{"line":109,"column":8},"end":{"line":118,"column":9}},"50":{"start":{"line":110,"column":12},"end":{"line":114,"column":15}},"51":{"start":{"line":117,"column":12},"end":{"line":117,"column":42}},"52":{"start":{"line":121,"column":8},"end":{"line":133,"column":9}},"53":{"start":{"line":122,"column":12},"end":{"line":129,"column":15}},"54":{"start":{"line":132,"column":12},"end":{"line":132,"column":42}},"55":{"start":{"line":137,"column":8},"end":{"line":137,"column":27}},"56":{"start":{"line":138,"column":8},"end":{"line":148,"column":9}},"57":{"start":{"line":139,"column":12},"end":{"line":144,"column":13}},"58":{"start":{"line":140,"column":16},"end":{"line":140,"column":68}},"59":{"start":{"line":143,"column":16},"end":{"line":143,"column":45}},"60":{"start":{"line":147,"column":12},"end":{"line":147,"column":55}},"61":{"start":{"line":152,"column":27},"end":{"line":152,"column":95}},"62":{"start":{"line":153,"column":8},"end":{"line":165,"column":9}},"63":{"start":{"line":154,"column":12},"end":{"line":160,"column":13}},"64":{"start":{"line":155,"column":16},"end":{"line":155,"column":105}},"65":{"start":{"line":159,"column":16},"end":{"line":159,"column":125}},"66":{"start":{"line":164,"column":12},"end":{"line":164,"column":121}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":64},"end":{"line":26,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":53},"end":{"line":43,"column":5}},"line":27},"3":{"name":"(anonymous_3)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":44},"end":{"line":52,"column":5}},"line":44},"4":{"name":"(anonymous_4)","decl":{"start":{"line":48,"column":35},"end":{"line":48,"column":36}},"loc":{"start":{"line":48,"column":46},"end":{"line":50,"column":9}},"line":48},"5":{"name":"(anonymous_5)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":57},"end":{"line":68,"column":5}},"line":53},"6":{"name":"(anonymous_6)","decl":{"start":{"line":61,"column":60},"end":{"line":61,"column":61}},"loc":{"start":{"line":61,"column":73},"end":{"line":63,"column":13}},"line":61},"7":{"name":"(anonymous_7)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":70},"end":{"line":87,"column":5}},"line":69},"8":{"name":"(anonymous_8)","decl":{"start":{"line":79,"column":17},"end":{"line":79,"column":18}},"loc":{"start":{"line":79,"column":31},"end":{"line":84,"column":9}},"line":79},"9":{"name":"(anonymous_9)","decl":{"start":{"line":81,"column":165},"end":{"line":81,"column":166}},"loc":{"start":{"line":81,"column":178},"end":{"line":83,"column":13}},"line":81},"10":{"name":"(anonymous_10)","decl":{"start":{"line":85,"column":20},"end":{"line":85,"column":21}},"loc":{"start":{"line":85,"column":42},"end":{"line":85,"column":72}},"line":85},"11":{"name":"(anonymous_11)","decl":{"start":{"line":91,"column":4},"end":{"line":91,"column":5}},"loc":{"start":{"line":91,"column":98},"end":{"line":107,"column":5}},"line":91},"12":{"name":"(anonymous_12)","decl":{"start":{"line":108,"column":4},"end":{"line":108,"column":5}},"loc":{"start":{"line":108,"column":47},"end":{"line":119,"column":5}},"line":108},"13":{"name":"(anonymous_13)","decl":{"start":{"line":120,"column":4},"end":{"line":120,"column":5}},"loc":{"start":{"line":120,"column":44},"end":{"line":134,"column":5}},"line":120},"14":{"name":"(anonymous_14)","decl":{"start":{"line":135,"column":4},"end":{"line":135,"column":5}},"loc":{"start":{"line":135,"column":30},"end":{"line":149,"column":5}},"line":135},"15":{"name":"(anonymous_15)","decl":{"start":{"line":150,"column":4},"end":{"line":150,"column":5}},"loc":{"start":{"line":150,"column":35},"end":{"line":166,"column":5}},"line":150}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":25,"column":9}},{"start":{"line":14,"column":8},"end":{"line":25,"column":9}}],"line":14},"4":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},{"start":{"line":18,"column":12},"end":{"line":20,"column":13}}],"line":18},"5":{"loc":{"start":{"line":30,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":42,"column":9}},{"start":{"line":30,"column":8},"end":{"line":42,"column":9}}],"line":30},"6":{"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":133}},"type":"cond-expr","locations":[{"start":{"line":32,"column":105},"end":{"line":32,"column":111}},{"start":{"line":32,"column":114},"end":{"line":32,"column":133}}],"line":32},"7":{"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":102}},"type":"binary-expr","locations":[{"start":{"line":32,"column":36},"end":{"line":32,"column":85}},{"start":{"line":32,"column":89},"end":{"line":32,"column":102}}],"line":32},"8":{"loc":{"start":{"line":33,"column":12},"end":{"line":38,"column":13}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":38,"column":13}},{"start":{"line":33,"column":12},"end":{"line":38,"column":13}}],"line":33},"9":{"loc":{"start":{"line":59,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":66,"column":9}},{"start":{"line":59,"column":8},"end":{"line":66,"column":9}}],"line":59},"10":{"loc":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},{"start":{"line":70,"column":8},"end":{"line":72,"column":9}}],"line":70},"11":{"loc":{"start":{"line":81,"column":19},"end":{"line":83,"column":14}},"type":"cond-expr","locations":[{"start":{"line":81,"column":149},"end":{"line":81,"column":155}},{"start":{"line":81,"column":158},"end":{"line":83,"column":14}}],"line":81},"12":{"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":146}},"type":"binary-expr","locations":[{"start":{"line":81,"column":19},"end":{"line":81,"column":129}},{"start":{"line":81,"column":133},"end":{"line":81,"column":146}}],"line":81},"13":{"loc":{"start":{"line":81,"column":25},"end":{"line":81,"column":119}},"type":"cond-expr","locations":[{"start":{"line":81,"column":95},"end":{"line":81,"column":101}},{"start":{"line":81,"column":104},"end":{"line":81,"column":119}}],"line":81},"14":{"loc":{"start":{"line":81,"column":25},"end":{"line":81,"column":92}},"type":"binary-expr","locations":[{"start":{"line":81,"column":25},"end":{"line":81,"column":75}},{"start":{"line":81,"column":79},"end":{"line":81,"column":92}}],"line":81},"15":{"loc":{"start":{"line":91,"column":44},"end":{"line":91,"column":54}},"type":"default-arg","locations":[{"start":{"line":91,"column":53},"end":{"line":91,"column":54}}],"line":91},"16":{"loc":{"start":{"line":91,"column":56},"end":{"line":91,"column":81}},"type":"default-arg","locations":[{"start":{"line":91,"column":77},"end":{"line":91,"column":81}}],"line":91},"17":{"loc":{"start":{"line":91,"column":83},"end":{"line":91,"column":96}},"type":"default-arg","locations":[{"start":{"line":91,"column":91},"end":{"line":91,"column":96}}],"line":91},"18":{"loc":{"start":{"line":138,"column":8},"end":{"line":148,"column":9}},"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":148,"column":9}},{"start":{"line":138,"column":8},"end":{"line":148,"column":9}}],"line":138},"19":{"loc":{"start":{"line":139,"column":12},"end":{"line":144,"column":13}},"type":"if","locations":[{"start":{"line":139,"column":12},"end":{"line":144,"column":13}},{"start":{"line":139,"column":12},"end":{"line":144,"column":13}}],"line":139},"20":{"loc":{"start":{"line":139,"column":16},"end":{"line":139,"column":268}},"type":"binary-expr","locations":[{"start":{"line":139,"column":16},"end":{"line":139,"column":140}},{"start":{"line":139,"column":144},"end":{"line":139,"column":268}}],"line":139},"21":{"loc":{"start":{"line":139,"column":17},"end":{"line":139,"column":131}},"type":"cond-expr","locations":[{"start":{"line":139,"column":113},"end":{"line":139,"column":119}},{"start":{"line":139,"column":122},"end":{"line":139,"column":131}}],"line":139},"22":{"loc":{"start":{"line":139,"column":17},"end":{"line":139,"column":110}},"type":"binary-expr","locations":[{"start":{"line":139,"column":17},"end":{"line":139,"column":93}},{"start":{"line":139,"column":97},"end":{"line":139,"column":110}}],"line":139},"23":{"loc":{"start":{"line":139,"column":23},"end":{"line":139,"column":83}},"type":"cond-expr","locations":[{"start":{"line":139,"column":60},"end":{"line":139,"column":66}},{"start":{"line":139,"column":69},"end":{"line":139,"column":83}}],"line":139},"24":{"loc":{"start":{"line":139,"column":23},"end":{"line":139,"column":57}},"type":"binary-expr","locations":[{"start":{"line":139,"column":23},"end":{"line":139,"column":37}},{"start":{"line":139,"column":41},"end":{"line":139,"column":57}}],"line":139},"25":{"loc":{"start":{"line":139,"column":145},"end":{"line":139,"column":259}},"type":"cond-expr","locations":[{"start":{"line":139,"column":241},"end":{"line":139,"column":247}},{"start":{"line":139,"column":250},"end":{"line":139,"column":259}}],"line":139},"26":{"loc":{"start":{"line":139,"column":145},"end":{"line":139,"column":238}},"type":"binary-expr","locations":[{"start":{"line":139,"column":145},"end":{"line":139,"column":221}},{"start":{"line":139,"column":225},"end":{"line":139,"column":238}}],"line":139},"27":{"loc":{"start":{"line":139,"column":151},"end":{"line":139,"column":211}},"type":"cond-expr","locations":[{"start":{"line":139,"column":188},"end":{"line":139,"column":194}},{"start":{"line":139,"column":197},"end":{"line":139,"column":211}}],"line":139},"28":{"loc":{"start":{"line":139,"column":151},"end":{"line":139,"column":185}},"type":"binary-expr","locations":[{"start":{"line":139,"column":151},"end":{"line":139,"column":165}},{"start":{"line":139,"column":169},"end":{"line":139,"column":185}}],"line":139},"29":{"loc":{"start":{"line":152,"column":27},"end":{"line":152,"column":95}},"type":"cond-expr","locations":[{"start":{"line":152,"column":77},"end":{"line":152,"column":83}},{"start":{"line":152,"column":86},"end":{"line":152,"column":95}}],"line":152},"30":{"loc":{"start":{"line":152,"column":27},"end":{"line":152,"column":74}},"type":"binary-expr","locations":[{"start":{"line":152,"column":27},"end":{"line":152,"column":57}},{"start":{"line":152,"column":61},"end":{"line":152,"column":74}}],"line":152},"31":{"loc":{"start":{"line":153,"column":8},"end":{"line":165,"column":9}},"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":165,"column":9}},{"start":{"line":153,"column":8},"end":{"line":165,"column":9}}],"line":153},"32":{"loc":{"start":{"line":154,"column":12},"end":{"line":160,"column":13}},"type":"if","locations":[{"start":{"line":154,"column":12},"end":{"line":160,"column":13}},{"start":{"line":154,"column":12},"end":{"line":160,"column":13}}],"line":154}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":2,"13":3,"14":1,"15":1,"16":1,"17":1,"18":0,"19":2,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":1,"27":1,"28":1,"29":1,"30":2,"31":1,"32":1,"33":0,"34":1,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":1,"47":1,"48":0,"49":1,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0},"f":{"0":1,"1":3,"2":3,"3":0,"4":0,"5":1,"6":2,"7":1,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,2],"4":[0,1],"5":[1,2],"6":[0,1],"7":[1,1],"8":[1,0],"9":[1,0],"10":[1,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0],"16":[1],"17":[1],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/integrations/blockchair/index.ts","sources":["/workspaces/backend/src/integrations/blockchair/index.ts"],"names":[],"mappings":"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","sourcesContent":["import axios, { AxiosResponse, AxiosError } from \"axios\";\nimport {\n  IAddressEndpoint,\n  IAddressData,\n  IDailyTransactionCountEndpoint,\n  ITransactionDataOfAddress,\n  ITransactionEndpoint,\n} from \"./types\";\n\nimport { Validate, OffsettError, ErrorOrigin, HttpStatusCode, OffsettErrorDescriptions } from \"../../util\";\n\nexport default class BlockchairApiClientWrapper {\n  public static async getAllTransactionDatesOfWallet(bitcoinAddress: string): Promise<Date[]> {\n    let first10kTransactionDates: Date[];\n    let transactionCount: number;\n    let pagesCount: number;\n    let remainingTrasactionDates: Date[];\n    if (Validate.bitcoinWalletAddress(bitcoinAddress)) {\n      ({ first10kTransactionDates, transactionCount, pagesCount } = await this.getFirst10kTransactions(bitcoinAddress));\n      remainingTrasactionDates = await this.getRemainingTransactions(bitcoinAddress, pagesCount - 1);\n\n      const allTransactionDates: Date[] = first10kTransactionDates.concat(remainingTrasactionDates);\n\n      if (transactionCount !== allTransactionDates.length) {\n        throw new OffsettError(\n          ErrorOrigin.BLOCKCHAIR,\n          HttpStatusCode.INTERNAL_SERVER_ERROR,\n          OffsettErrorDescriptions.BLOCKCHAIR_INVALID_TRANSACTION_COUNT,\n          false,\n        );\n      }\n\n      return allTransactionDates;\n    } else {\n      throw new OffsettError(\n        ErrorOrigin.BLOCKCHAIR,\n        HttpStatusCode.BAD_REQUEST,\n        OffsettErrorDescriptions.BITCOIN_ADDRESS_VALIDATION_ERROR,\n        false,\n      );\n    }\n  }\n\n  public static async getDateOfTransaction(transactionID: string): Promise<Date | undefined> {\n    let response: AxiosResponse<ITransactionEndpoint>;\n    if (Validate.bitcoinTransactionID(transactionID)) {\n      response = await BlockchairApiClient.getTransaction(transactionID);\n\n      const transactionDate: string | undefined = response.data.data[transactionID]?.transaction.time;\n      if (transactionDate) {\n        return new Date(transactionDate);\n      } else {\n        return undefined;\n      }\n    } else {\n      throw new OffsettError(\n        ErrorOrigin.BLOCKCHAIR,\n        HttpStatusCode.BAD_REQUEST,\n        OffsettErrorDescriptions.BITCOIN_TRANSACTION_VALIDATION_ERROR,\n        false,\n      );\n    }\n  }\n\n  public static async getDailyTransactionCount(): Promise<{ [key: string]: number }> {\n    let response: AxiosResponse<IDailyTransactionCountEndpoint>;\n    const dailyTransactions: { [key: string]: number } = {};\n\n    response = await BlockchairApiClient.getDailyTransactionCount();\n\n    response.data.data.forEach((value) => {\n      dailyTransactions[value.date] = value[\"count()\"];\n    });\n    return dailyTransactions;\n  }\n\n  private static async getFirst10kTransactions(\n    bitcoinAddress: string,\n  ): Promise<{ first10kTransactionDates: Date[]; transactionCount: number; pagesCount: number }> {\n    let response: AxiosResponse<IAddressEndpoint>;\n    let transactionDates: Date[];\n    let transactionCount: number | undefined;\n\n    response = await BlockchairApiClient.getAddress(bitcoinAddress, 0);\n\n    const addressData: IAddressData | undefined = response.data.data[bitcoinAddress];\n    if (addressData) {\n      transactionCount = addressData.address.transaction_count;\n      transactionDates = addressData.transactions.map((current: ITransactionDataOfAddress): Date => {\n        return new Date(current.time);\n      });\n      const pagesCount: number = Math.ceil(transactionCount / 10000);\n      return { first10kTransactionDates: transactionDates, transactionCount, pagesCount };\n    }\n    throw new OffsettError(\n      ErrorOrigin.BLOCKCHAIR,\n      HttpStatusCode.INTERNAL_SERVER_ERROR,\n      \"Address Data coud not be received\",\n      false,\n    );\n  }\n\n  private static async getRemainingTransactions(bitcoinAddress: string, pagesCount: number): Promise<Date[]> {\n    if (pagesCount <= 0) {\n      return [];\n    }\n\n    const promises: Promise<AxiosResponse<IAddressEndpoint>>[] = [];\n\n    for (let i = 1; i <= pagesCount; i++) {\n      promises.push(BlockchairApiClient.getAddress(bitcoinAddress, 10000 * i));\n    }\n\n    const promiseResponses: AxiosResponse<IAddressEndpoint>[] = await Promise.all(promises);\n\n    return promiseResponses\n      .map((response: AxiosResponse<IAddressEndpoint>): Date[] | undefined =>\n        response.data.data[bitcoinAddress]?.transactions?.map((current: ITransactionDataOfAddress): Date => {\n          return new Date(current.time);\n        }),\n      )\n      .filter((transactionDates: Date[] | undefined): transactionDates is Date[] => transactionDates !== undefined)\n      .flat();\n  }\n}\n\nclass BlockchairApiClient {\n  static async getAddress(\n    bitcoinAddress: string,\n    offset: number = 0,\n    transactionDetails: boolean = true,\n    limit: number = 10000,\n  ): Promise<AxiosResponse<IAddressEndpoint>> {\n    try {\n      return await axios.get<IAddressEndpoint>(bitcoinAddress, {\n        baseURL: \"https://api.blockchair.com/bitcoin/dashboards/address/\",\n        responseType: \"json\",\n        headers: { \"content-Type\": \"application/json\" },\n        params: {\n          transaction_details: transactionDetails,\n          limit,\n          offset,\n        },\n      });\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  static async getTransaction(transactionID: string): Promise<AxiosResponse<ITransactionEndpoint>> {\n    try {\n      return await axios.get<ITransactionEndpoint>(transactionID, {\n        baseURL: \"https://api.blockchair.com/bitcoin/dashboards/transaction/\",\n        responseType: \"json\",\n        headers: { \"content-Type\": \"application/json\" },\n      });\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  static async getDailyTransactionCount(): Promise<AxiosResponse<IDailyTransactionCountEndpoint>> {\n    try {\n      return await axios.get<IDailyTransactionCountEndpoint>(\"transactions\", {\n        baseURL: \"https://api.blockchair.com/bitcoin\",\n        responseType: \"json\",\n        headers: { \"content-Type\": \"application/json\" },\n        params: {\n          a: \"date,count()\",\n        },\n      });\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  static handleError(error: any): void {\n    console.log(error);\n    if (axios.isAxiosError(error)) {\n      if (error?.response?.status === 402 || error?.response?.status === 429) {\n        throw OffsettError.BLOCKCHAIR_LIMIT_EXCEEDED;\n      } else {\n        this.handleAxiosError(error);\n      }\n    } else {\n      throw OffsettError.BLOCKCHAIR_ERROR;\n    }\n  }\n\n  static handleAxiosError(error: AxiosError): void {\n    const statusCode: number | undefined = error.response?.status;\n    if (statusCode) {\n      if (statusCode in HttpStatusCode) {\n        throw new OffsettError(ErrorOrigin.AXIOS, statusCode, error.message, true);\n      } else {\n        // unknown status code\n        throw new OffsettError(ErrorOrigin.AXIOS, HttpStatusCode.UNKNOWN, error.message, false);\n      }\n    } else {\n      // undefined status code\n      throw new OffsettError(ErrorOrigin.AXIOS, HttpStatusCode.UNKNOWN, error.message, false);\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"40a0c8f11242d0cec0cc1f36ecb3779d5c09de43"},"/workspaces/backend/src/util/index.ts":{"path":"/workspaces/backend/src/util/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":56}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":49}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":47}},"16":{"start":{"line":16,"column":0},"end":{"line":16,"column":45}},"17":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":10,"2":10,"3":10,"4":95,"5":0,"6":0,"7":0,"8":1,"9":5,"10":10,"11":10,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1},"f":{"0":10,"1":95,"2":0,"3":5},"b":{"0":[1,1,1],"1":[1,0],"2":[10,0],"3":[0,0],"4":[1,1,1],"5":[10,0],"6":[10,10]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/util/index.ts","sources":["/workspaces/backend/src/util/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,wDAAsC;AACtC,iDAA+B;AAC/B,+CAA6B;AAC7B,6CAA2B;AAC3B,0CAAwB","sourcesContent":["export * from \"./OffsettErrorHandler\";\nexport * from \"./OffsettError\";\nexport * from \"./OffsettUrl\";\nexport * from \"./Validate\";\nexport * from \"./Parse\";\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ec80e69b7ceb2d1e5e88f4ebfed6b2e363e541c1"},"/workspaces/backend/src/util/OffsettErrorHandler.ts":{"path":"/workspaces/backend/src/util/OffsettErrorHandler.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":37}},"4":{"start":{"line":7,"column":11},"end":{"line":7,"column":23}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":47}},"6":{"start":{"line":9,"column":15},"end":{"line":12,"column":2}},"7":{"start":{"line":15,"column":8},"end":{"line":22,"column":9}},"8":{"start":{"line":16,"column":12},"end":{"line":16,"column":31}},"9":{"start":{"line":17,"column":12},"end":{"line":17,"column":48}},"10":{"start":{"line":20,"column":12},"end":{"line":20,"column":32}},"11":{"start":{"line":21,"column":12},"end":{"line":21,"column":37}},"12":{"start":{"line":25,"column":0},"end":{"line":25,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":43},"end":{"line":23,"column":5}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":15,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":22,"column":9}},{"start":{"line":15,"column":8},"end":{"line":22,"column":9}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":6,"8":6,"9":6,"10":0,"11":0,"12":1},"f":{"0":1,"1":6},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[6,0]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/util/OffsettErrorHandler.ts","sources":["/workspaces/backend/src/util/OffsettErrorHandler.ts"],"names":[],"mappings":";;;;;;AACA,wBAAiC;AACjC,gDAAoC;AAEpC,MAAM,MAAM,GAAW,IAAA,cAAI,EAAC;IAC1B,IAAI,EAAE,SAAS;IACf,SAAS,EAAE,EAAE,MAAM,EAAE,aAAa,EAAE;CACrC,CAAC,CAAC;AAEH,MAAa,mBAAmB;IACvB,MAAM,CAAC,MAAM,CAAC,KAAU,EAAE,IAAqB,EAAE,GAAqB,EAAE,KAA2B;QACxG,IAAI,KAAK,YAAY,eAAY,EAAE;YACjC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACnB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACrC;aAAM;YACL,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACpB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC1B;IACH,CAAC;CACF;AAVD,kDAUC","sourcesContent":["import express from \"express\";\nimport { OffsettError } from \".\";\nimport pino, { Logger } from \"pino\";\n\nconst logger: Logger = pino({\n  name: \"Offsett\",\n  transport: { target: \"pino-pretty\" },\n});\n\nexport class OffsettErrorHandler {\n  public static handle(error: any, _req: express.Request, res: express.Response, _next: express.NextFunction) {\n    if (error instanceof OffsettError) {\n      logger.warn(error);\n      res.status(error.httpCode).json({});\n    } else {\n      logger.error(error);\n      res.status(500).json({});\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5be32c85628c125b16fa77f3aafcf47755c40cd5"},"/workspaces/backend/src/util/OffsettError.ts":{"path":"/workspaces/backend/src/util/OffsettError.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":181}},"2":{"start":{"line":5,"column":0},"end":{"line":12,"column":77}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":63}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":54}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":72}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":74}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":68}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":92}},"9":{"start":{"line":14,"column":0},"end":{"line":22,"column":68}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":52}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":45}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":39}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":39}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":39}},"15":{"start":{"line":20,"column":4},"end":{"line":20,"column":35}},"16":{"start":{"line":21,"column":4},"end":{"line":21,"column":53}},"17":{"start":{"line":24,"column":0},"end":{"line":36,"column":107}},"18":{"start":{"line":25,"column":4},"end":{"line":25,"column":84}},"19":{"start":{"line":26,"column":4},"end":{"line":26,"column":64}},"20":{"start":{"line":27,"column":4},"end":{"line":27,"column":60}},"21":{"start":{"line":28,"column":4},"end":{"line":28,"column":92}},"22":{"start":{"line":29,"column":4},"end":{"line":29,"column":96}},"23":{"start":{"line":30,"column":4},"end":{"line":30,"column":128}},"24":{"start":{"line":31,"column":4},"end":{"line":31,"column":70}},"25":{"start":{"line":32,"column":4},"end":{"line":32,"column":112}},"26":{"start":{"line":33,"column":4},"end":{"line":33,"column":114}},"27":{"start":{"line":34,"column":4},"end":{"line":34,"column":106}},"28":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"29":{"start":{"line":39,"column":8},"end":{"line":39,"column":27}},"30":{"start":{"line":40,"column":8},"end":{"line":40,"column":29}},"31":{"start":{"line":41,"column":8},"end":{"line":41,"column":33}},"32":{"start":{"line":42,"column":8},"end":{"line":42,"column":39}},"33":{"start":{"line":43,"column":8},"end":{"line":43,"column":43}},"34":{"start":{"line":44,"column":8},"end":{"line":44,"column":45}},"35":{"start":{"line":45,"column":8},"end":{"line":45,"column":58}},"36":{"start":{"line":46,"column":8},"end":{"line":46,"column":38}},"37":{"start":{"line":49,"column":8},"end":{"line":49,"column":43}},"38":{"start":{"line":52,"column":8},"end":{"line":52,"column":59}},"39":{"start":{"line":55,"column":8},"end":{"line":55,"column":59}},"40":{"start":{"line":58,"column":8},"end":{"line":58,"column":112}},"41":{"start":{"line":61,"column":0},"end":{"line":61,"column":36}},"42":{"start":{"line":62,"column":0},"end":{"line":62,"column":128}},"43":{"start":{"line":63,"column":0},"end":{"line":63,"column":138}},"44":{"start":{"line":64,"column":0},"end":{"line":64,"column":156}},"45":{"start":{"line":65,"column":0},"end":{"line":65,"column":159}},"46":{"start":{"line":66,"column":0},"end":{"line":66,"column":123}},"47":{"start":{"line":67,"column":0},"end":{"line":67,"column":137}},"48":{"start":{"line":70,"column":8},"end":{"line":70,"column":51}},"49":{"start":{"line":71,"column":8},"end":{"line":71,"column":29}},"50":{"start":{"line":72,"column":8},"end":{"line":72,"column":33}},"51":{"start":{"line":73,"column":8},"end":{"line":73,"column":39}},"52":{"start":{"line":76,"column":0},"end":{"line":76,"column":58}},"53":{"start":{"line":79,"column":8},"end":{"line":79,"column":52}},"54":{"start":{"line":80,"column":8},"end":{"line":80,"column":29}},"55":{"start":{"line":81,"column":8},"end":{"line":81,"column":33}},"56":{"start":{"line":82,"column":8},"end":{"line":82,"column":39}},"57":{"start":{"line":85,"column":0},"end":{"line":85,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":27},"end":{"line":12,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":1},"end":{"line":14,"column":2}},"loc":{"start":{"line":14,"column":24},"end":{"line":22,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":1},"end":{"line":24,"column":2}},"loc":{"start":{"line":24,"column":37},"end":{"line":36,"column":1}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":62},"end":{"line":47,"column":5}},"line":38},"4":{"name":"(anonymous_4)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":36},"end":{"line":50,"column":5}},"line":48},"5":{"name":"(anonymous_5)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":12},"end":{"line":53,"column":5}},"line":51},"6":{"name":"(anonymous_6)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":12},"end":{"line":56,"column":5}},"line":54},"7":{"name":"(anonymous_7)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":40},"end":{"line":59,"column":5}},"line":57},"8":{"name":"(anonymous_8)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":47},"end":{"line":74,"column":5}},"line":69},"9":{"name":"(anonymous_9)","decl":{"start":{"line":78,"column":4},"end":{"line":78,"column":5}},"loc":{"start":{"line":78,"column":47},"end":{"line":83,"column":5}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":20},"end":{"line":12,"column":75}},"type":"binary-expr","locations":[{"start":{"line":12,"column":20},"end":{"line":12,"column":42}},{"start":{"line":12,"column":47},"end":{"line":12,"column":74}}],"line":12},"1":{"loc":{"start":{"line":22,"column":17},"end":{"line":22,"column":66}},"type":"binary-expr","locations":[{"start":{"line":22,"column":17},"end":{"line":22,"column":36}},{"start":{"line":22,"column":41},"end":{"line":22,"column":65}}],"line":22},"2":{"loc":{"start":{"line":36,"column":30},"end":{"line":36,"column":105}},"type":"binary-expr","locations":[{"start":{"line":36,"column":30},"end":{"line":36,"column":62}},{"start":{"line":36,"column":67},"end":{"line":36,"column":104}}],"line":36},"3":{"loc":{"start":{"line":52,"column":15},"end":{"line":52,"column":58}},"type":"binary-expr","locations":[{"start":{"line":52,"column":15},"end":{"line":52,"column":35}},{"start":{"line":52,"column":39},"end":{"line":52,"column":58}}],"line":52},"4":{"loc":{"start":{"line":55,"column":15},"end":{"line":55,"column":58}},"type":"binary-expr","locations":[{"start":{"line":55,"column":15},"end":{"line":55,"column":35}},{"start":{"line":55,"column":39},"end":{"line":55,"column":58}}],"line":55}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":20,"30":20,"31":20,"32":20,"33":20,"34":20,"35":20,"36":20,"37":0,"38":0,"39":0,"40":0,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":1},"f":{"0":1,"1":1,"2":1,"3":20,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[1,1],"1":[1,1],"2":[1,1],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/util/OffsettError.ts","sources":["/workspaces/backend/src/util/OffsettError.ts"],"names":[],"mappings":"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","sourcesContent":["export enum HttpStatusCode {\n  UNKNOWN = -1, // unkown error\n  OK = 200, // successful\n  BAD_REQUEST = 400, // client error\n  UNAUTHORIZED = 401, // authentification necessary\n  NOT_FOUND = 404, // resource not found\n  INTERNAL_SERVER_ERROR = 500, // Offsett error\n}\n\nexport enum ErrorOrigin {\n  AXIOS,\n  BLOCKCHAIR = \"BLOCKCHAIR\",\n  UNKNOWN = \"UNKNOWN\",\n  OFFSETT = \"OFFSETT\",\n  UTILITY = \"UTILITY\",\n  SETUP = \"SETUP\",\n  AUTHENTICATION = \"AUTHENTICATION\",\n}\n\nexport enum OffsettErrorDescriptions {\n  UNKNOWN_BITCOIN_ADDRESS = \"Unknown Bitcoin address\",\n  UNKNOWN_ERROR = \"Unknown error\",\n  AXIOS_ERROR = \"Axios error\",\n  BLOCKCHAIR_LIMIT_EXCEEDED = \"Blockchair limit was exceeded\",\n  BLOCKCHAIR_GET_ADDRESS_FAILED = \"Blockchair get address failed\",\n  BLOCKCHAIR_INVALID_TRANSACTION_COUNT = \"Blockchair returned and invalid number of transactions\",\n  BLOCKCHAIR_ERROR = \"Blockchair Error\",\n  BLOCKCHAIR_GET_DAILY_TRANSACTION_COUNT_FAILED = \"Blockchair get address failed\",\n  BITCOIN_TRANSACTION_VALIDATION_ERROR = \"Validation of bitcoin transaction failed\",\n  BITCOIN_ADDRESS_VALIDATION_ERROR = \"Validation of bitcoin address failed\",\n  SETUP_FAILED = \"Setup failed\",\n}\n\nexport class OffsettError extends Error {\n  override name: string;\n\n  constructor(\n    public readonly origin: ErrorOrigin,\n    public readonly httpCode: HttpStatusCode,\n    public readonly description: string,\n    public isOperational: boolean,\n  ) {\n    super(description);\n    this.name = HttpStatusCode[httpCode] as string;\n    Object.setPrototypeOf(this, new.target.prototype);\n    Error.captureStackTrace(this);\n  }\n\n  setIsOperational(isOperational: boolean) {\n    this.isOperational = isOperational;\n  }\n\n  is4xx() {\n    return this.httpCode >= 400 && this.httpCode < 500;\n  }\n\n  is5xx() {\n    return this.httpCode >= 500 && this.httpCode < 600;\n  }\n\n  static ofErrorMessage(errorMessage: string): OffsettError {\n    return new OffsettError(ErrorOrigin.UNKNOWN, HttpStatusCode.INTERNAL_SERVER_ERROR, errorMessage, false);\n  }\n\n  static readonly UNKOWN_ERROR = new OffsettError(\n    ErrorOrigin.UNKNOWN,\n    HttpStatusCode.INTERNAL_SERVER_ERROR,\n    \"Unknown Error\",\n    false,\n  );\n\n  static readonly BLOCKCHAIR_ERROR = new OffsettError(\n    ErrorOrigin.BLOCKCHAIR,\n    HttpStatusCode.INTERNAL_SERVER_ERROR,\n    \"Blockchair Error\",\n    false,\n  );\n\n  static readonly BLOCKCHAIR_REQUEST_FAILED = new OffsettError(\n    ErrorOrigin.BLOCKCHAIR,\n    HttpStatusCode.INTERNAL_SERVER_ERROR,\n    \"Blockchair request failed\",\n    false,\n  );\n\n  static readonly BLOCKCHAIR_LIMIT_EXCEEDED = new OffsettError(\n    ErrorOrigin.BLOCKCHAIR,\n    HttpStatusCode.INTERNAL_SERVER_ERROR,\n    \"Blockchair limit was exceeded\",\n    true,\n  );\n\n  static readonly AXIOS_ERROR = new OffsettError(\n    ErrorOrigin.AXIOS,\n    HttpStatusCode.INTERNAL_SERVER_ERROR,\n    \"Axios error\",\n    false,\n  );\n\n  static readonly SETUP_ERROR = new OffsettError(\n    ErrorOrigin.SETUP,\n    HttpStatusCode.INTERNAL_SERVER_ERROR,\n    \"Unkown error during setup\",\n    false,\n  );\n}\n\nexport class OperationalOffsettError extends OffsettError {\n  constructor(\n    public override readonly origin: ErrorOrigin,\n    public override readonly httpCode: HttpStatusCode,\n    public override readonly description: string,\n  ) {\n    super(origin, httpCode, description, true);\n  }\n}\n\nexport class ProgrammaticOffsettError extends OffsettError {\n  constructor(\n    public override readonly origin: ErrorOrigin,\n    public override readonly httpCode: HttpStatusCode,\n    public override readonly description: string,\n  ) {\n    super(origin, httpCode, description, false);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"51d1ba171ab710ef5f2f39228dca695ea41bb487"},"/workspaces/backend/src/util/OffsettUrl.ts":{"path":"/workspaces/backend/src/util/OffsettUrl.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":6,"column":65}},"3":{"start":{"line":7,"column":0},"end":{"line":18,"column":65}},"4":{"start":{"line":9,"column":4},"end":{"line":13,"column":69}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":75}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":97}},"8":{"start":{"line":15,"column":4},"end":{"line":17,"column":69}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":85}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":23},"end":{"line":6,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":1},"end":{"line":7,"column":2}},"loc":{"start":{"line":7,"column":23},"end":{"line":18,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":5},"end":{"line":9,"column":6}},"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":5}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":25},"end":{"line":17,"column":5}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":63}},"type":"binary-expr","locations":[{"start":{"line":6,"column":16},"end":{"line":6,"column":34}},{"start":{"line":6,"column":39},"end":{"line":6,"column":62}}],"line":6},"1":{"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":18},"end":{"line":13,"column":37}},{"start":{"line":13,"column":42},"end":{"line":13,"column":66}}],"line":13},"2":{"loc":{"start":{"line":17,"column":18},"end":{"line":17,"column":67}},"type":"binary-expr","locations":[{"start":{"line":17,"column":18},"end":{"line":17,"column":37}},{"start":{"line":17,"column":42},"end":{"line":17,"column":66}}],"line":17},"3":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":63}},"type":"binary-expr","locations":[{"start":{"line":18,"column":16},"end":{"line":18,"column":34}},{"start":{"line":18,"column":39},"end":{"line":18,"column":62}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{"0":[1,1],"1":[1,1],"2":[1,1],"3":[1,0]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/util/OffsettUrl.ts","sources":["/workspaces/backend/src/util/OffsettUrl.ts"],"names":[],"mappings":";;;AAAA,IAAY,UAAa;AAAzB,WAAY,UAAU;AAAE,CAAC,EAAb,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAAG;AAEzB,WAAiB,UAAU;IACzB,IAAY,QAIX;IAJD,WAAY,QAAQ;QAClB,kEAAsD,CAAA;QACtD,oFAAwE,CAAA;QACxE,wFAA4E,CAAA;IAC9E,CAAC,EAJW,QAAQ,GAAR,mBAAQ,KAAR,mBAAQ,QAInB;IAED,IAAY,QAEX;IAFD,WAAY,QAAQ;QAClB,4EAAgE,CAAA;IAClE,CAAC,EAFW,QAAQ,GAAR,mBAAQ,KAAR,mBAAQ,QAEnB;AACH,CAAC,EAVgB,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAU1B","sourcesContent":["export enum OffsettUrl {}\n\nexport namespace OffsettUrl {\n  export enum relative {\n    ESTIMATE_WALLET_IMPACT = \"/estimate-impact/wallet-id/\",\n    ESTIMATE_IMPACT_WITH_TRANSACTION_ID = \"/estimate-impact/transaction-id/\",\n    ESTIMATE_IMPACT_WITH_TRANSACTION_DATE = \"/estimate-impact/transaction-date/\",\n  }\n\n  export enum absolute {\n    OFFSETT_API_BASEPATH = \"https://backend-offsett-co.onrender.com\",\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"76a0a5e642fa8b452c37371e6e4f6fb05e20a3ff"},"/workspaces/backend/src/util/Validate.ts":{"path":"/workspaces/backend/src/util/Validate.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":35},"end":{"line":4,"column":70}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":55}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":78}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":87}},"6":{"start":{"line":13,"column":36},"end":{"line":13,"column":69}},"7":{"start":{"line":16,"column":46},"end":{"line":16,"column":67}},"8":{"start":{"line":17,"column":22},"end":{"line":17,"column":32}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":70}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":47},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":47},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":42},"end":{"line":14,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":26},"end":{"line":13,"column":27}},"loc":{"start":{"line":13,"column":36},"end":{"line":13,"column":69}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":40},"end":{"line":19,"column":5}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":69}},"type":"binary-expr","locations":[{"start":{"line":18,"column":15},"end":{"line":18,"column":52}},{"start":{"line":18,"column":56},"end":{"line":18,"column":69}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":3,"4":3,"5":0,"6":0,"7":3,"8":3,"9":3,"10":1},"f":{"0":3,"1":3,"2":0,"3":0,"4":3},"b":{"0":[3,2]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/util/Validate.ts","sources":["/workspaces/backend/src/util/Validate.ts"],"names":[],"mappings":";;;AAAA,uEAAoD;AAEpD,MAAa,QAAQ;IACZ,MAAM,CAAC,oBAAoB,CAAC,aAAqB;QACtD,OAAO,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACjD,CAAC;IAEM,MAAM,CAAC,oBAAoB,CAAC,aAAqB;QACtD,OAAO,IAAA,mCAAQ,EAAC,aAAa,EAAE,KAAK,CAAC,CAAC;IACxC,CAAC;IAEM,MAAM,CAAC,uBAAuB,CAAC,KAAa;QACjD,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACjF,CAAC;IAEM,MAAM,CAAC,sBAAsB,CAAC,IAAU;QAC7C,MAAM,6BAA6B,GAAS,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;QAClE,MAAM,KAAK,GAAS,IAAI,IAAI,EAAE,CAAC;QAC/B,OAAO,IAAI,IAAI,6BAA6B,IAAI,IAAI,IAAI,KAAK,CAAC;IAChE,CAAC;CACF;AAlBD,4BAkBC","sourcesContent":["import { validate } from \"wallet-address-validator\";\n\nexport class Validate {\n  public static bitcoinTransactionID(transactionID: string): boolean {\n    return /^[a-fA-F0-9]{64}$/.test(transactionID);\n  }\n\n  public static bitcoinWalletAddress(walletAddress: string): boolean {\n    return validate(walletAddress, \"BTC\");\n  }\n\n  public static bitcoinTransactionDates(dates: Date[]): boolean {\n    return !dates.map((date) => this.bitcoinTransactionDate(date)).includes(false);\n  }\n\n  public static bitcoinTransactionDate(date: Date): boolean {\n    const dateOfFirstBitcoinTransaction: Date = new Date(2009, 1, 16);\n    const today: Date = new Date();\n    return date >= dateOfFirstBitcoinTransaction && date <= today;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a1d213a97a78d5167f47bc0018d71ccaeb01abdc"},"/workspaces/backend/src/util/Parse.ts":{"path":"/workspaces/backend/src/util/Parse.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"3":{"start":{"line":8,"column":8},"end":{"line":28,"column":9}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":51}},"5":{"start":{"line":10,"column":35},"end":{"line":10,"column":83}},"6":{"start":{"line":11,"column":12},"end":{"line":27,"column":13}},"7":{"start":{"line":12,"column":29},"end":{"line":12,"column":55}},"8":{"start":{"line":13,"column":30},"end":{"line":13,"column":56}},"9":{"start":{"line":14,"column":28},"end":{"line":14,"column":54}},"10":{"start":{"line":15,"column":16},"end":{"line":17,"column":17}},"11":{"start":{"line":16,"column":20},"end":{"line":16,"column":129}},"12":{"start":{"line":18,"column":16},"end":{"line":20,"column":17}},"13":{"start":{"line":19,"column":20},"end":{"line":19,"column":43}},"14":{"start":{"line":21,"column":43},"end":{"line":21,"column":68}},"15":{"start":{"line":22,"column":16},"end":{"line":26,"column":17}},"16":{"start":{"line":23,"column":20},"end":{"line":25,"column":21}},"17":{"start":{"line":24,"column":24},"end":{"line":24,"column":52}},"18":{"start":{"line":29,"column":8},"end":{"line":29,"column":118}},"19":{"start":{"line":32,"column":0},"end":{"line":32,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":28},"end":{"line":30,"column":5}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":8,"column":8},"end":{"line":28,"column":9}},{"start":{"line":8,"column":8},"end":{"line":28,"column":9}}],"line":8},"1":{"loc":{"start":{"line":11,"column":12},"end":{"line":27,"column":13}},"type":"if","locations":[{"start":{"line":11,"column":12},"end":{"line":27,"column":13}},{"start":{"line":11,"column":12},"end":{"line":27,"column":13}}],"line":11},"2":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":60}},"type":"binary-expr","locations":[{"start":{"line":11,"column":16},"end":{"line":11,"column":28}},{"start":{"line":11,"column":32},"end":{"line":11,"column":44}},{"start":{"line":11,"column":48},"end":{"line":11,"column":60}}],"line":11},"3":{"loc":{"start":{"line":15,"column":16},"end":{"line":17,"column":17}},"type":"if","locations":[{"start":{"line":15,"column":16},"end":{"line":17,"column":17}},{"start":{"line":15,"column":16},"end":{"line":17,"column":17}}],"line":15},"4":{"loc":{"start":{"line":15,"column":20},"end":{"line":15,"column":75}},"type":"binary-expr","locations":[{"start":{"line":15,"column":20},"end":{"line":15,"column":31}},{"start":{"line":15,"column":35},"end":{"line":15,"column":46}},{"start":{"line":15,"column":50},"end":{"line":15,"column":61}},{"start":{"line":15,"column":65},"end":{"line":15,"column":75}}],"line":15},"5":{"loc":{"start":{"line":18,"column":16},"end":{"line":20,"column":17}},"type":"if","locations":[{"start":{"line":18,"column":16},"end":{"line":20,"column":17}},{"start":{"line":18,"column":16},"end":{"line":20,"column":17}}],"line":18},"6":{"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":76}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":36}},{"start":{"line":18,"column":41},"end":{"line":18,"column":57}},{"start":{"line":18,"column":61},"end":{"line":18,"column":75}}],"line":18},"7":{"loc":{"start":{"line":22,"column":16},"end":{"line":26,"column":17}},"type":"if","locations":[{"start":{"line":22,"column":16},"end":{"line":26,"column":17}},{"start":{"line":22,"column":16},"end":{"line":26,"column":17}}],"line":22},"8":{"loc":{"start":{"line":23,"column":20},"end":{"line":25,"column":21}},"type":"if","locations":[{"start":{"line":23,"column":20},"end":{"line":25,"column":21}},{"start":{"line":23,"column":20},"end":{"line":25,"column":21}}],"line":23},"9":{"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":60}},"type":"binary-expr","locations":[{"start":{"line":23,"column":24},"end":{"line":23,"column":31}},{"start":{"line":23,"column":35},"end":{"line":23,"column":60}}],"line":23}},"s":{"0":1,"1":1,"2":1,"3":18,"4":14,"5":14,"6":14,"7":14,"8":14,"9":14,"10":14,"11":3,"12":11,"13":9,"14":11,"15":11,"16":11,"17":8,"18":7,"19":1},"f":{"0":18},"b":{"0":[14,4],"1":[14,0],"2":[14,14,14],"3":[3,11],"4":[14,13,13,12],"5":[9,2],"6":[11,9,9],"7":[11,0],"8":[8,3],"9":[11,10]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/util/Parse.ts","sources":["/workspaces/backend/src/util/Parse.ts"],"names":[],"mappings":";;;AAAA,wBAA8D;AAE9D,MAAa,KAAK;IAChB,2BAA2B;IACpB,MAAM,CAAC,IAAI,CAAC,UAAkB;QACnC,IAAI,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;YAC1C,MAAM,SAAS,GAAa,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAClD,MAAM,cAAc,GAAa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAElF,IAAI,SAAS,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,EAAE;gBAChD,MAAM,IAAI,GAAW,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBAChD,MAAM,KAAK,GAAW,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBACjD,MAAM,GAAG,GAAW,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBAE/C,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,GAAG,EAAE,EAAE;oBAC3D,MAAM,IAAI,eAAY,CAAC,cAAW,CAAC,OAAO,EAAE,iBAAc,CAAC,WAAW,EAAE,oBAAoB,EAAE,IAAI,CAAC,CAAC;iBACrG;gBAED,IAAI,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC5D,cAAc,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;iBACxB;gBAED,MAAM,kBAAkB,GAAuB,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAEzE,IAAI,kBAAkB,EAAE;oBACtB,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,IAAI,kBAAkB,EAAE;wBACxC,OAAO,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC;qBAC7B;iBACF;aACF;SACF;QACD,MAAM,IAAI,eAAY,CAAC,cAAW,CAAC,OAAO,EAAE,iBAAc,CAAC,WAAW,EAAE,qBAAqB,EAAE,IAAI,CAAC,CAAC;IACvG,CAAC;CACF;AA/BD,sBA+BC","sourcesContent":["import { ErrorOrigin, HttpStatusCode, OffsettError } from \".\";\r\n\r\nexport class Parse {\r\n  // Use ISO 8601: YYYY-MM-DD\r\n  public static date(dateString: string): Date | undefined {\r\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\r\n      const dateParts: string[] = dateString.split(\"-\");\r\n      const lengthOfMonths: number[] = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\r\n      if (dateParts[0] && dateParts[1] && dateParts[2]) {\r\n        const year: number = parseInt(dateParts[0], 10);\r\n        const month: number = parseInt(dateParts[1], 10);\r\n        const day: number = parseInt(dateParts[2], 10);\r\n\r\n        if (year < 1000 || year > 3000 || month === 0 || month > 12) {\r\n          throw new OffsettError(ErrorOrigin.UTILITY, HttpStatusCode.BAD_REQUEST, \"Invalid date range\", true);\r\n        }\r\n\r\n        if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {\r\n          lengthOfMonths[1] = 29;\r\n        }\r\n\r\n        const currentMonthLength: number | undefined = lengthOfMonths[month - 1];\r\n\r\n        if (currentMonthLength) {\r\n          if (day > 0 && day <= currentMonthLength) {\r\n            return new Date(dateString);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    throw new OffsettError(ErrorOrigin.UTILITY, HttpStatusCode.BAD_REQUEST, \"Invalid date format\", true);\r\n  }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6bba2858e8696de5045bf43ae81825ee4ed8505d"},"/workspaces/backend/src/services/estimate-impact/index.ts":{"path":"/workspaces/backend/src/services/estimate-impact/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":52}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":3,"5":0,"6":0,"7":0,"8":1,"9":2,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":1,"1":3,"2":0,"3":2},"b":{"0":[1,1,1],"1":[1,0],"2":[1,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/services/estimate-impact/index.ts","sources":["/workspaces/backend/src/services/estimate-impact/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,oDAAkC;AAClC,0CAAwB","sourcesContent":["export * from \"./ImpactEstimator\";\nexport * from \"./types\";"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c5fa043870dfc5821fa75883eb526f93bef2cef9"},"/workspaces/backend/src/services/estimate-impact/ImpactEstimator.ts":{"path":"/workspaces/backend/src/services/estimate-impact/ImpactEstimator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":48},"end":{"line":4,"column":122}},"3":{"start":{"line":7,"column":46},"end":{"line":7,"column":101}},"4":{"start":{"line":8,"column":42},"end":{"line":8,"column":106}},"5":{"start":{"line":9,"column":8},"end":{"line":13,"column":10}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":88}},"7":{"start":{"line":19,"column":44},"end":{"line":19,"column":45}},"8":{"start":{"line":20,"column":8},"end":{"line":31,"column":9}},"9":{"start":{"line":21,"column":12},"end":{"line":30,"column":15}},"10":{"start":{"line":23,"column":16},"end":{"line":23,"column":70}},"11":{"start":{"line":26,"column":60},"end":{"line":26,"column":116}},"12":{"start":{"line":27,"column":16},"end":{"line":29,"column":17}},"13":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"14":{"start":{"line":32,"column":8},"end":{"line":32,"column":57}},"15":{"start":{"line":35,"column":0},"end":{"line":35,"column":42}},"16":{"start":{"line":37,"column":0},"end":{"line":37,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":42},"end":{"line":14,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":71},"end":{"line":17,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":65},"end":{"line":33,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":21},"end":{"line":22,"column":22}},"loc":{"start":{"line":22,"column":42},"end":{"line":24,"column":13}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":25,"column":25},"end":{"line":25,"column":26}},"loc":{"start":{"line":25,"column":46},"end":{"line":30,"column":13}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":31,"column":9}},{"start":{"line":20,"column":8},"end":{"line":31,"column":9}}],"line":20},"1":{"loc":{"start":{"line":27,"column":16},"end":{"line":29,"column":17}},"type":"if","locations":[{"start":{"line":27,"column":16},"end":{"line":29,"column":17}},{"start":{"line":27,"column":16},"end":{"line":29,"column":17}}],"line":27}},"s":{"0":1,"1":1,"2":1,"3":3,"4":3,"5":3,"6":3,"7":3,"8":3,"9":3,"10":4,"11":4,"12":4,"13":2,"14":3,"15":1,"16":1},"f":{"0":3,"1":3,"2":3,"3":4,"4":4},"b":{"0":[3,0],"1":[2,2]},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/services/estimate-impact/ImpactEstimator.ts","sources":["/workspaces/backend/src/services/estimate-impact/ImpactEstimator.ts"],"names":[],"mappings":";;;AACA,MAAM,uCAAuC,GAEzC,OAAO,CAAC,iEAAiE,CAAC,CAAC;AAE/E,MAAa,eAAe;IAInB,MAAM,CAAC,YAAY,CAAC,gBAAwB;QACjD,MAAM,6BAA6B,GAAW,IAAI,CAAC,gCAAgC,CAAC,gBAAgB,CAAC,CAAC;QACtG,MAAM,yBAAyB,GAAW,IAAI,CAAC,4BAA4B,CAAC,6BAA6B,CAAC,CAAC;QAE3G,OAAO;YACL,oBAAoB,EAAE,gBAAgB,CAAC,MAAM;YAC7C,yBAAyB;YACzB,6BAA6B;SAC9B,CAAC;IACJ,CAAC;IAEO,MAAM,CAAC,4BAA4B,CAAC,6BAAqC;QAC/E,OAAO,IAAI,CAAC,KAAK,CAAC,6BAA6B,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC;IAClF,CAAC;IAEO,MAAM,CAAC,gCAAgC,CAAC,mBAAkC;QAChF,IAAI,6BAA6B,GAAG,CAAC,CAAC;QACtC,IAAI,mBAAmB,EAAE;YACvB,mBAAmB;iBAChB,GAAG,CAAC,CAAC,eAAqB,EAAE,EAAE;gBAC7B,OAAO,eAAe,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YACxD,CAAC,CAAC;iBACD,OAAO,CAAC,CAAC,eAAuB,EAAE,EAAE;gBACnC,MAAM,mCAAmC,GACvC,uCAAuC,CAAC,eAAe,CAAC,CAAC;gBAC3D,IAAI,mCAAmC,EAAE;oBACvC,6BAA6B,IAAI,mCAAmC,CAAC;iBACtE;YACH,CAAC,CAAC,CAAC;SACN;QACD,OAAO,IAAI,CAAC,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACnD,CAAC;;AAnCH,0CAoCC;AAnCC,8EAA8E;AAC9D,uCAAuB,GAAG,KAAK,CAAC","sourcesContent":["import { ImpactEstimate } from \".\";\nconst bitcoinEnergyConsumptionEstimatesPerDay: {\n  [key: string]: number;\n} = require(\"../../../data/btc/impact-estimates-per-transaction/per-day.json\");\n\nexport class ImpactEstimator {\n  // source: https://www.sciencedirect.com/science/article/pii/S2542435119302557\n  static readonly GRAMS_CO2_PER_WATT_HOUR = 0.481;\n\n  public static getEstimates(transactionDates: Date[]): ImpactEstimate {\n    const usedEnergyOfWalletInWattHours: number = this.getUsedEnergyOfWalletInWattHours(transactionDates);\n    const walletEmissionsInGramsCo2: number = this.getWalletEmissionsInGramsCo2(usedEnergyOfWalletInWattHours);\n\n    return {\n      numberOfTransactions: transactionDates.length,\n      walletEmissionsInGramsCo2,\n      usedEnergyOfWalletInWattHours,\n    };\n  }\n\n  private static getWalletEmissionsInGramsCo2(usedEnergyOfWalletInWattHours: number) {\n    return Math.round(usedEnergyOfWalletInWattHours * this.GRAMS_CO2_PER_WATT_HOUR);\n  }\n\n  private static getUsedEnergyOfWalletInWattHours(allTransactionDates: Date[] | null): number {\n    let usedEnergyOfWalletInWattHours = 0;\n    if (allTransactionDates) {\n      allTransactionDates\n        .map((transactionDate: Date) => {\n          return transactionDate.toISOString().substring(0, 10);\n        })\n        .forEach((transactionDate: string) => {\n          const usedEnergyOfTransactionsInWattHours: number | undefined =\n            bitcoinEnergyConsumptionEstimatesPerDay[transactionDate];\n          if (usedEnergyOfTransactionsInWattHours) {\n            usedEnergyOfWalletInWattHours += usedEnergyOfTransactionsInWattHours;\n          }\n        });\n    }\n    return Math.round(usedEnergyOfWalletInWattHours);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"949211947fe2605120cb9690bf48a72a540fc588"},"/workspaces/backend/src/services/estimate-impact/types.ts":{"path":"/workspaces/backend/src/services/estimate-impact/types.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/workspaces/backend/src/services/estimate-impact/types.ts","sources":["/workspaces/backend/src/services/estimate-impact/types.ts"],"names":[],"mappings":"","sourcesContent":["export interface ImpactEstimate {\n  numberOfTransactions: number;\n  walletEmissionsInGramsCo2: number;\n  usedEnergyOfWalletInWattHours: number;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"849e6c6edc5c4b97b8bf6c1ba09eb6f9bd0f6a36"}}